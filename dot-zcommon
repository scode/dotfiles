function source_if_exists {
	fname=$1
	if [ -e $fname ]
	then
		source $fname
	fi
}

source_if_exists ~/.zcommon-local-pre

# Keep cursor at constant position and show current directory on the
# right. This nicely aligns commands, and does not cause problems when
# indeep directories as the left prompt will override the right
# prompt, avoiding line wrapping.
export PS1='%% '
export RPS1='%m:%~%(..(%?%)%'

# The year is > 2000. We have memory.
HISTSIZE=500

# Default to UTF-8.
if [ -z "$LANG" ]
then
        LANG=en_US.UTF_8
fi

# Enable intelligent completion.
autoload -U compinit
compinit

# Don't start background jobs niced
setopt no_bg_nice

export PAGER=less
export EDITOR=emacs

alias mplayer='mplayer -lavdopts fast:threads=4 -monitoraspect 16:10 -cache-min 1 -cache 50000 -ao oss:/dev/dsp4:mixer-device=/dev/mixer4'
alias irb='irb --readline -r irb/completion'
alias svns='svn status'

if [ "$(uname)" = "Linux" ]
then
        alias spotify='wine "C:\Program Files\Spotify\spotify.exe"'
fi

alias stackless='/home/scode/stackless/bin/python2.6'

# rxvt-unicode is not well-known in termcaps
if [ "$TERM" = "rxvt-unicode" ]
then
	export TERM="rxvt"
fi

# BEGIN subversion
svnbase=${svnbase:=https://localhost/svnbase-not-set}

function svnrel {
	echo "${svnbase}$1"
}
# END subversion

source_if_exists ~/.zcommon-local
source_if_exists ~/.zcommon-local-post

